!function(){"use Strict";timeTrackingApp.factory("webcamService",function(){var t={};t.isTurnOn=!1,t.patData=null;var a=null;t.patOpts={x:0,y:0,w:25,h:25},t.channel={videoHeight:800,videoWidth:600},t.webcamError=!1;var e=function(t,e,n,r){var i=document.createElement("canvas");i.width=a.width,i.height=a.height;var o=i.getContext("2d");return o.drawImage(a,0,0,a.width,a.height),o.getImageData(t,e,n,r)};return t.makeSnapshot=function(n){var r=document.querySelector("#snapshot");if(r){r.width=a.width,r.height=a.height;var i=r.getContext("2d"),o=e(t.patOpts.x,t.patOpts.y,t.patOpts.w,t.patOpts.h);i.putImageData(o,0,0),t.snapshotData=r.toDataURL("image/jpeg"),t.patData=o,t.showDialog(t.snapshotData)}},t.onSuccess=function(){a=t.channel.video,t.patOpts.w=a.width,t.patOpts.h=a.height,t.isTurnOn=!0},t.onStream=function(t){return activeStream=t,activeStream},t.onError=function(a){t.webcamError=a},t.turnOff=function(){if(t.isTurnOn=!1,activeStream&&activeStream.getVideoTracks){return!!("function"==typeof activeStream.getVideoTracks)&&activeStream.getVideoTracks()[0].stop()}return!1},{webcam:t}})}();