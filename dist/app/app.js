var timeTrackingApp=window.angular.module("timeTrackingApp",["LocalStorageModule","webcam","ngAnimate","ui.router","ngMaterial","anim-in-out","timeTrackingApp.config"]);timeTrackingApp.config(["$stateProvider","$urlRouterProvider",function(e,t){t.when("","/pinLogin"),t.when("/","/pinLogin"),t.otherwise("/pinLogin");var n={name:"login",url:"/login",module:"public",controller:"LoginCtrl",templateUrl:"app/components/login/login.html"},r={name:"pinLogin",url:"/pinLogin",module:"private",controller:"PinLoginCtrl",templateUrl:"app/components/pin/pinLogin.html"},o={name:"capture",url:"/capture",module:"private",controller:"WebcamCtrl",templateUrl:"app/components/webcam/webcam.html"};e.state(n),e.state(r),e.state(o)}]),timeTrackingApp.config(["localStorageServiceProvider",function(e){e.setPrefix("myApp").setStorageType("localStorage")}]),timeTrackingApp.run(["$rootScope","$state","localStorageService",function(e,t,n){e.$on("$stateChangeStart",function(e,r,o,i,a){var u=n.get("isLogin");if("private"===r.module&&(null===u||!1===u))return e.preventDefault(),t.go("login"),!0;var l=n.get("currentUserProfile");"pinLogin"===i.name&&null===l&&"login"!==r.name&&e.preventDefault()}),e.$on("$locationChangeStart",function(e,r,o){n.get("isLogin")||(e.preventDefault(),t.go("login"))})}]),timeTrackingApp.config(["$httpProvider",function(e){e.interceptors.push(["$timeout","$q","$window","$injector","$rootScope",function(t,n,r,o,i){var a;return e.defaults.headers.common={},e.defaults.headers.post={},e.defaults.headers.put={},e.defaults.headers.patch={},t(function(){a=o.get("$http")}),{request:function(e){return e.headers=e.headers||{},e},requestError:function(e){return n.reject(e)},responseError:function(e){var t=n.defer();return 401===e.status?i.$emit("unauthorized"):403===e.status||e.status,t.reject(reason)}}}])}]),timeTrackingApp.run(["$rootScope","$state","AuthService",function(e,t,n){e.$on("unauthorized",function(){t.is("login")||n.reAuth().then(function(e){},function(e){t.go("login")})})}]);