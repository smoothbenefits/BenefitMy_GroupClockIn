var timeTrackingApp=window.angular.module("timeTrackingApp",["LocalStorageModule","webcam","ngAnimate","ui.router","ngMaterial","anim-in-out"]);timeTrackingApp.config(["$stateProvider","$urlRouterProvider",function(e,t){t.when("","/pinLogin"),t.when("/","/pinLogin"),t.otherwise("/pinLogin");var n={name:"login",url:"/login",module:"public",controller:"LoginCtrl",templateUrl:"app/components/login/login.html"},o={name:"pinLogin",url:"/pinLogin",module:"private",controller:"PinLoginCtrl",templateUrl:"app/components/pin/pinLogin.html"},r={name:"capture",url:"/capture",module:"private",controller:"WebcamCtrl",templateUrl:"app/components/webcam/webcam.html"};e.state(n),e.state(o),e.state(r)}]),timeTrackingApp.config(["localStorageServiceProvider",function(e){e.setPrefix("myApp").setStorageType("localStorage")}]),timeTrackingApp.run(["$rootScope","$state","localStorageService",function(e,t,n){e.$on("$stateChangeStart",function(e,o,r,i,a){var p=n.get("isLogin");if("private"===o.module&&(null===p||!1===p))return e.preventDefault(),t.go("login"),!0;var u=n.get("currentUserProfile");"pinLogin"===i.name&&null===u&&"login"!==o.name&&e.preventDefault()}),e.$on("$locationChangeStart",function(e,o,r){n.get("isLogin")||(e.preventDefault(),t.go("login"))})}]),timeTrackingApp.constant("StageBASEURL","https://benefitmy-python-staging.herokuapp.com/api/v1/"),timeTrackingApp.constant("DemoTimeServiceURL","https://demotimetracking.workbenefits.me/api/v1/"),timeTrackingApp.config(["$httpProvider",function(e){e.interceptors.push(["$timeout","$q","$window","$injector","$rootScope",function(t,n,o,r,i){var a;return e.defaults.headers.common={},e.defaults.headers.post={},e.defaults.headers.put={},e.defaults.headers.patch={},t(function(){a=r.get("$http")}),{request:function(e){return e.headers=e.headers||{},e},requestError:function(e){return n.reject(e)},responseError:function(e){var t=n.defer();return 401===e.status?i.$emit("unauthorized"):403===e.status||e.status,t.reject(reason)}}}])}]),timeTrackingApp.run(["$rootScope","$state","AuthService",function(e,t,n){e.$on("unauthorized",function(){t.is("login")||n.reAuth().then(function(e){},function(e){t.go("login")})})}]);